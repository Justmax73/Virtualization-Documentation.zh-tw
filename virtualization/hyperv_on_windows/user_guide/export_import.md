---
title: "匯出和匯入虛擬機器"
description: "匯出和匯入虛擬機器"
keywords: windows 10, hyper-v
author: scooley
ms.date: 05/02/2016
ms.topic: article
ms.prod: windows-10-hyperv
ms.service: windows-10-hyperv
ms.assetid: 7fd996f5-1ea9-4b16-9776-85fb39a3aa34
translationtype: Human Translation
ms.sourcegitcommit: ffdf89b0ae346197b9ae631ee5260e0565261c55
ms.openlocfilehash: 620a2c38514488100bae4eb71d0683e3994801b4

---

# 匯出和匯入虛擬機器

您可以使用 Hyper-V 的匯出和匯入功能，快速複製虛擬機器。  匯出的虛擬機器可用於備份，或用來在 Hyper-V 主機之間移動虛擬機器。  

匯入可讓您還原虛擬機器。  您不需要匯出虛擬機器，就能夠將它匯入。 匯入會嘗試從任何可用的資源重新建立虛擬機器。  使用 **[匯入虛擬機器]** 精靈來指定檔案的位置。 這會向 Hyper-V 註冊虛擬機器，並使其可供使用。
 
本文件逐步解說如何匯出和匯入虛擬機器，以及執行這些工作時您可選擇的一些選項。

## 匯出虛擬機器

### 使用 Hyper-V 管理員

在建立虛擬機器的匯出時，所有關聯的檔案會集結在匯出中。 這包括設定檔案、硬碟檔案和任何現有的檢查點檔案。 建立虛擬機器匯出：

1. 在 [Hyper-V 管理員] 中，以滑鼠右鍵按一下所需的虛擬機器，然後選取 **[匯出]**。

2. 指定要儲存匯出檔案的位置，然後按一下 **[匯出]** 按鈕。

**附註：**此處理序可以在處於啟動或停止狀態的虛擬機器上執行。

匯出完成時，您可以在匯出位置下看到所有匯出的檔案。

### 使用 PowerShell

若要使用 PowerShell 匯出虛擬機器，請使用 **Export-VM** 命令。 

```powershell
Export-VM -Name <vm name> -Path <path>
```

如需使用 Windows PowerShell 匯出虛擬機器的相關資訊，請參閱 [Export-VM](https://technet.microsoft.com/library/hh848491.aspx)

## 匯入虛擬機器 

匯入虛擬機器會在 Hyper-V 主機註冊該虛擬機器。 可以將虛擬機器匯出匯入原主機 (其衍生來源) 或新的主機。 

Hyper-V 有三種匯入類型：

- **就地註冊** – 匯出檔案已放在應該執行虛擬機器的位置。 在匯入時，虛擬機器的識別碼與匯出時的識別碼一樣。 因為這個緣故，如果已在 Hyper-V 註冊該虛擬機器，需要先將其刪除才能匯入。 匯入完成時，匯出檔案會變成執行中狀態，且無法移除。

- **還原虛擬機器** – 您可以選擇將 VM 檔案儲存在特定位置，或使用 Hyper-V 的預設位置。 這種匯入類型會建立匯出檔案的副本，並將它們移到選取的位置。 在匯入時，虛擬機器的識別碼與匯出時的識別碼一樣。 因為這個緣故，如果該虛擬機器已在 Hyper-V 中執行，需要先將其刪除才能匯入。 匯入完成時，匯出的檔案仍保留不變，可以移除和/或再次匯入。

- **複製虛擬機器** – 這種匯入類型類似需要選取 VM 檔案位置的「還原」類型。 不同之處在於，匯入後虛擬機器會有新的唯一識別碼。 這個特點讓虛擬機器可以多次匯入同一主機。


### 使用 Hyper-V 管理員

將虛擬機器匯入 Hyper-V 主機：

1. 在 [Hyper-V 管理員] 中，按一下動作功能表中的 **[匯入虛擬機器]**。

2. 在 [在您開始前] 畫面上，按一下 **[下一步]**。

3. 選取包含匯出檔案的資料夾，然後按一下 **[下一步]**。

4. 選取要匯入的虛擬機器，很可能只會有一個選項。

5. 從三個匯入類型的選項之中選擇一個，然後按 [下一步]。 

6. 選取摘要畫面上的 **[完成]**。

[匯入虛擬機器] 精靈也會引導您逐步完成虛擬機器匯入新主機時時解決不相容問題的步驟 - 因此，此精靈有助於與實體硬體相關聯的設定，例如記憶體、虛擬交換器和虛擬處理器。

為了匯入虛擬機器，精靈會執行以下工作：  
1. 建立虛擬機器設定檔案的副本。 這是為了預防萬一主機發生意外的重新啟動 (例如發生停電)。  

2. 驗證硬體。 將虛擬機器設定檔案中的資訊與新主機上的硬體進行比較。

3. 編譯錯誤清單。 此清單標示出哪些項目需要重新設定，並決定精靈中的下一頁是什麼內容。

4. 顯示相關頁面，一次一個類別。 精靈會說明每個不相容問題，以協助您重新設定虛擬機器，使其與新的主機相容。

5. 移除設定檔案的副本。 精靈完成以上工作後，虛擬機器就準備好可以啟動了。


### 使用 PowerShell

若要使用 PowerShell 匯入虛擬機器，請使用 **Import-VM** 命令。  下列命令示範使用 PowerShell 進行三種不同匯入類型的匯入。

若要完成虛擬機器的就地匯入，命令看起來會像這樣。 如前述，就地匯入會使用在匯入時儲存的檔案，並保留虛擬機器識別碼。

```powershell
Import-VM -Path 'C:\<vm export path>\2B91FEB3-F1E0-4FFF-B8BE-29CED892A95A.vmcx' 
```

若要匯入虛擬機器，請指定您自己的虛擬機器檔案路徑，命令看起來會像這樣。

```powershell
Import-VM -Path ‘C:\<vm export path>\2B91FEB3-F1E0-4FFF-B8BE-29CED892A95A.vmcx' -Copy -VhdDestinationPath 'D:\Virtual Machines\WIN10DOC' -VirtualMachinePath 'D:\Virtual Machines\WIN10DOC'
```

若要完成複製匯入，並將虛擬機器檔案移至預設 Hyper-V 位置，命令看起來會像這樣。

``` PowerShell
Import-VM -Path 'C:\<vm export path>\2B91FEB3-F1E0-4FFF-B8BE-29CED892A95A.vmcx' -Copy -GenerateNewId
```

如需詳細資訊，請參閱 [Import-VM](https://technet.microsoft.com/library/hh848495.aspx)。



<!--HONumber=Oct16_HO4-->


